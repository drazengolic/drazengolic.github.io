<!DOCTYPE html>
<html lang="sr-BA">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://www.drazengolic.com/images/favicon.png" />
<title>–£–±—Ä–∑–∞–≤–∞—ö–µ –ø—Ä–µ—Ç—Ä–∞–≥–µ –ø–æ —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–æ–º —à–∞–±–ª–æ–Ω—É —É PostgreSQL | –î—Ä–∞–∂–µ–Ω –ì–æ–ª–∏—õ</title>
<meta name="title" content="–£–±—Ä–∑–∞–≤–∞—ö–µ –ø—Ä–µ—Ç—Ä–∞–≥–µ –ø–æ —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–æ–º —à–∞–±–ª–æ–Ω—É —É PostgreSQL" />
<meta name="description" content="–£–≤–æ–¥ –ü—Ä–µ—Ç–ø–æ—Å—Ç–∞–≤–∏–º–æ –¥–∞ –∏–º–∞–º–æ —Ç–∞–±–µ–ª—É —Å–∞ —É–ø–∏—Å–∏–º–∞ –∫–æ—ò—É –∂–µ–ª–∏–º–æ –¥–∞ –ø—Ä–µ—Ç—Ä–∞–∂—É—ò–µ–º–æ –ø–æ –Ω–µ–∫–æ–º —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–æ–º –∞—Ç—Ä–∏–±—É—Ç—É, –∫–∞–æ —à—Ç–æ —ò–µ –∏–º–µ –∏–ª–∏ –Ω–∞—Å–ª–æ–≤. –¢–∞–∫–æ—í–µ –∂–µ–ª–∏–º–æ –¥–∞ —Å–æ—Ä—Ç–∏—Ä–∞–º–æ —Ç–µ —É–ø–∏—Å–µ –Ω–∞ –Ω–∞—á–∏–Ω –∫–æ—ò–∏ –Ω–∏—ò–µ –Ω—É–∂–Ω–æ –ø–æ–≤–µ–∑–∞–Ω –Ω–∏ —Å–∞ –∏–º–µ–Ω–æ–º –Ω–∏ –Ω–∞–∑–∏–≤–æ–º - –Ω–∞ –ø—Ä–∏–º—ò–µ—Ä, –∂–µ–ª–∏–º–æ –¥–∞ –ø—Ä–≤–æ –ø—Ä–∏–∫–∞–∂–µ–º–æ –Ω–∞—ò–Ω–æ–≤–∏—ò–µ —É–ø–∏—Å–µ, –∏–ª–∏ –æ–Ω–µ –Ω–∞—ò–ø–æ–ø—É–ª–∞—Ä–Ω–∏—ò–µ. –ù–∞–∫–æ–Ω –Ω–µ–∫–æ–≥ –≤—Ä–µ–º–µ–Ω–∞, –±—Ä–æ—ò —É–ø–∏—Å–∞ —É —Ç–∞–±–µ–ª–∏ —Å–µ –ø–æ–≤–µ—õ–∞–æ, –ø—Ä–µ—Ç—Ä–∞–≥–∞ –ø–æ—Å—Ç–∞—ò–µ —Å–≤–µ —Å–ø–æ—Ä–∏—ò–∞, –∏ –º–æ—Ä–∞–º–æ –Ω–µ–∫–∞–∫–æ –¥–∞ —ò–µ —É–±—Ä–∑–∞–º–æ. –ö–∞–∫–≤–µ —Å—É –Ω–∞–º –æ–ø—Ü–∏—ò–µ –Ω–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—ö—É?" />
<meta name="keywords" content="PostgreSQL,–ü–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–µ," />






  
  <meta property="og:title" content="–£–±—Ä–∑–∞–≤–∞—ö–µ –ø—Ä–µ—Ç—Ä–∞–≥–µ –ø–æ —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–æ–º —à–∞–±–ª–æ–Ω—É —É PostgreSQL" />
<meta property="og:description" content="–£–≤–æ–¥ –ü—Ä–µ—Ç–ø–æ—Å—Ç–∞–≤–∏–º–æ –¥–∞ –∏–º–∞–º–æ —Ç–∞–±–µ–ª—É —Å–∞ —É–ø–∏—Å–∏–º–∞ –∫–æ—ò—É –∂–µ–ª–∏–º–æ –¥–∞ –ø—Ä–µ—Ç—Ä–∞–∂—É—ò–µ–º–æ –ø–æ –Ω–µ–∫–æ–º —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–æ–º –∞—Ç—Ä–∏–±—É—Ç—É, –∫–∞–æ —à—Ç–æ —ò–µ –∏–º–µ –∏–ª–∏ –Ω–∞—Å–ª–æ–≤. –¢–∞–∫–æ—í–µ –∂–µ–ª–∏–º–æ –¥–∞ —Å–æ—Ä—Ç–∏—Ä–∞–º–æ —Ç–µ —É–ø–∏—Å–µ –Ω–∞ –Ω–∞—á–∏–Ω –∫–æ—ò–∏ –Ω–∏—ò–µ –Ω—É–∂–Ω–æ –ø–æ–≤–µ–∑–∞–Ω –Ω–∏ —Å–∞ –∏–º–µ–Ω–æ–º –Ω–∏ –Ω–∞–∑–∏–≤–æ–º - –Ω–∞ –ø—Ä–∏–º—ò–µ—Ä, –∂–µ–ª–∏–º–æ –¥–∞ –ø—Ä–≤–æ –ø—Ä–∏–∫–∞–∂–µ–º–æ –Ω–∞—ò–Ω–æ–≤–∏—ò–µ —É–ø–∏—Å–µ, –∏–ª–∏ –æ–Ω–µ –Ω–∞—ò–ø–æ–ø—É–ª–∞—Ä–Ω–∏—ò–µ. –ù–∞–∫–æ–Ω –Ω–µ–∫–æ–≥ –≤—Ä–µ–º–µ–Ω–∞, –±—Ä–æ—ò —É–ø–∏—Å–∞ —É —Ç–∞–±–µ–ª–∏ —Å–µ –ø–æ–≤–µ—õ–∞–æ, –ø—Ä–µ—Ç—Ä–∞–≥–∞ –ø–æ—Å—Ç–∞—ò–µ —Å–≤–µ —Å–ø–æ—Ä–∏—ò–∞, –∏ –º–æ—Ä–∞–º–æ –Ω–µ–∫–∞–∫–æ –¥–∞ —ò–µ —É–±—Ä–∑–∞–º–æ. –ö–∞–∫–≤–µ —Å—É –Ω–∞–º –æ–ø—Ü–∏—ò–µ –Ω–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—ö—É?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.drazengolic.com/sr/blog/text-search-postgres/" /><meta property="og:image" content="https://www.drazengolic.com/images/postgresql.webp" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2021-07-16T23:33:12+02:00" />
<meta property="article:modified_time" content="2021-07-16T23:33:12+02:00" /><meta property="og:site_name" content="Drazen Golic" />


  
  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://www.drazengolic.com/images/postgresql.webp"/>

<meta name="twitter:title" content="–£–±—Ä–∑–∞–≤–∞—ö–µ –ø—Ä–µ—Ç—Ä–∞–≥–µ –ø–æ —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–æ–º —à–∞–±–ª–æ–Ω—É —É PostgreSQL"/>
<meta name="twitter:description" content="–£–≤–æ–¥ –ü—Ä–µ—Ç–ø–æ—Å—Ç–∞–≤–∏–º–æ –¥–∞ –∏–º–∞–º–æ —Ç–∞–±–µ–ª—É —Å–∞ —É–ø–∏—Å–∏–º–∞ –∫–æ—ò—É –∂–µ–ª–∏–º–æ –¥–∞ –ø—Ä–µ—Ç—Ä–∞–∂—É—ò–µ–º–æ –ø–æ –Ω–µ–∫–æ–º —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–æ–º –∞—Ç—Ä–∏–±—É—Ç—É, –∫–∞–æ —à—Ç–æ —ò–µ –∏–º–µ –∏–ª–∏ –Ω–∞—Å–ª–æ–≤. –¢–∞–∫–æ—í–µ –∂–µ–ª–∏–º–æ –¥–∞ —Å–æ—Ä—Ç–∏—Ä–∞–º–æ —Ç–µ —É–ø–∏—Å–µ –Ω–∞ –Ω–∞—á–∏–Ω –∫–æ—ò–∏ –Ω–∏—ò–µ –Ω—É–∂–Ω–æ –ø–æ–≤–µ–∑–∞–Ω –Ω–∏ —Å–∞ –∏–º–µ–Ω–æ–º –Ω–∏ –Ω–∞–∑–∏–≤–æ–º - –Ω–∞ –ø—Ä–∏–º—ò–µ—Ä, –∂–µ–ª–∏–º–æ –¥–∞ –ø—Ä–≤–æ –ø—Ä–∏–∫–∞–∂–µ–º–æ –Ω–∞—ò–Ω–æ–≤–∏—ò–µ —É–ø–∏—Å–µ, –∏–ª–∏ –æ–Ω–µ –Ω–∞—ò–ø–æ–ø—É–ª–∞—Ä–Ω–∏—ò–µ. –ù–∞–∫–æ–Ω –Ω–µ–∫–æ–≥ –≤—Ä–µ–º–µ–Ω–∞, –±—Ä–æ—ò —É–ø–∏—Å–∞ —É —Ç–∞–±–µ–ª–∏ —Å–µ –ø–æ–≤–µ—õ–∞–æ, –ø—Ä–µ—Ç—Ä–∞–≥–∞ –ø–æ—Å—Ç–∞—ò–µ —Å–≤–µ —Å–ø–æ—Ä–∏—ò–∞, –∏ –º–æ—Ä–∞–º–æ –Ω–µ–∫–∞–∫–æ –¥–∞ —ò–µ —É–±—Ä–∑–∞–º–æ. –ö–∞–∫–≤–µ —Å—É –Ω–∞–º –æ–ø—Ü–∏—ò–µ –Ω–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—ö—É?"/>
<meta name="twitter:site" content="@Drazen_88"/>


  
  <meta itemprop="name" content="–£–±—Ä–∑–∞–≤–∞—ö–µ –ø—Ä–µ—Ç—Ä–∞–≥–µ –ø–æ —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–æ–º —à–∞–±–ª–æ–Ω—É —É PostgreSQL">
<meta itemprop="description" content="–£–≤–æ–¥ –ü—Ä–µ—Ç–ø–æ—Å—Ç–∞–≤–∏–º–æ –¥–∞ –∏–º–∞–º–æ —Ç–∞–±–µ–ª—É —Å–∞ —É–ø–∏—Å–∏–º–∞ –∫–æ—ò—É –∂–µ–ª–∏–º–æ –¥–∞ –ø—Ä–µ—Ç—Ä–∞–∂—É—ò–µ–º–æ –ø–æ –Ω–µ–∫–æ–º —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–æ–º –∞—Ç—Ä–∏–±—É—Ç—É, –∫–∞–æ —à—Ç–æ —ò–µ –∏–º–µ –∏–ª–∏ –Ω–∞—Å–ª–æ–≤. –¢–∞–∫–æ—í–µ –∂–µ–ª–∏–º–æ –¥–∞ —Å–æ—Ä—Ç–∏—Ä–∞–º–æ —Ç–µ —É–ø–∏—Å–µ –Ω–∞ –Ω–∞—á–∏–Ω –∫–æ—ò–∏ –Ω–∏—ò–µ –Ω—É–∂–Ω–æ –ø–æ–≤–µ–∑–∞–Ω –Ω–∏ —Å–∞ –∏–º–µ–Ω–æ–º –Ω–∏ –Ω–∞–∑–∏–≤–æ–º - –Ω–∞ –ø—Ä–∏–º—ò–µ—Ä, –∂–µ–ª–∏–º–æ –¥–∞ –ø—Ä–≤–æ –ø—Ä–∏–∫–∞–∂–µ–º–æ –Ω–∞—ò–Ω–æ–≤–∏—ò–µ —É–ø–∏—Å–µ, –∏–ª–∏ –æ–Ω–µ –Ω–∞—ò–ø–æ–ø—É–ª–∞—Ä–Ω–∏—ò–µ. –ù–∞–∫–æ–Ω –Ω–µ–∫–æ–≥ –≤—Ä–µ–º–µ–Ω–∞, –±—Ä–æ—ò —É–ø–∏—Å–∞ —É —Ç–∞–±–µ–ª–∏ —Å–µ –ø–æ–≤–µ—õ–∞–æ, –ø—Ä–µ—Ç—Ä–∞–≥–∞ –ø–æ—Å—Ç–∞—ò–µ —Å–≤–µ —Å–ø–æ—Ä–∏—ò–∞, –∏ –º–æ—Ä–∞–º–æ –Ω–µ–∫–∞–∫–æ –¥–∞ —ò–µ —É–±—Ä–∑–∞–º–æ. –ö–∞–∫–≤–µ —Å—É –Ω–∞–º –æ–ø—Ü–∏—ò–µ –Ω–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—ö—É?"><meta itemprop="datePublished" content="2021-07-16T23:33:12+02:00" />
<meta itemprop="dateModified" content="2021-07-16T23:33:12+02:00" />
<meta itemprop="wordCount" content="1561"><meta itemprop="image" content="https://www.drazengolic.com/images/postgresql.webp">
<meta itemprop="keywords" content="PostgreSQL,–ü–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–µ," />

<meta name="referrer" content="no-referrer-when-downgrade" />

  
  <link href="/style.min.css" rel="stylesheet">

  
    
    <link href="/syntax.min.css" rel="stylesheet">
  

  

  
</head>

<body>
  <header><a class="skip-link" href="#main-content">Skip to main content</a>

<a href="/sr/" class="title"><h1>–î—Ä–∞–∂–µ–Ω –ì–æ–ª–∏—õ</h1></a>
<nav>
  <a href="/sr/">–ü–æ—á–µ—Ç–Ω–∞</a>

  <a href="/sr/blog/">–ß–ª–∞–Ω—Ü–∏</a>

  <a href="/sr/projects/">–ü—Ä–æ—ò–µ–∫—Ç–∏</a>

  <a href="/sr/hire-me/">–ê–Ω–≥–∞–∂—É—ò –º–µ</a>

<a href='https://www.drazengolic.com/index.xml'>RSS</a>




  




  
    <a href="https://www.drazengolic.com/blog/text-search-postgres/">en üá∫üá∏</a>
  

</nav>
</header>
  <main id="main-content">

<h1>–£–±—Ä–∑–∞–≤–∞—ö–µ –ø—Ä–µ—Ç—Ä–∞–≥–µ –ø–æ —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–æ–º —à–∞–±–ª–æ–Ω—É —É PostgreSQL</h1>
<p class="byline">
  <time datetime='2021-07-16' pubdate>
    2021-07-16
  </time>
  
</p>

<content>
  
  <i>–°–∞–¥—Ä–∂–∞—ò:</i>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#—É–≤–æ–¥">–£–≤–æ–¥</a></li>
    <li><a href="#–ø—Ä–µ—Ñ–∏–∫—Å–Ω–∞–ø–æ—Å—Ç—Ñ–∏–∫—Å–Ω–∞-–ø—Ä–µ—Ç—Ä–∞–≥–∞">–ü—Ä–µ—Ñ–∏–∫—Å–Ω–∞/–ø–æ—Å—Ç—Ñ–∏–∫—Å–Ω–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞</a>
      <ul>
        <li><a href="#–ø—Ä–µ—Ñ–∏–∫—Å–Ω–∞-–ø—Ä–µ—Ç—Ä–∞–≥–∞">–ü—Ä–µ—Ñ–∏–∫—Å–Ω–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞</a></li>
        <li><a href="#–Ω–µ–¥–æ—Å—Ç–∞—Ü–∏">–ù–µ–¥–æ—Å—Ç–∞—Ü–∏</a></li>
        <li><a href="#–ø–æ—Å—Ç—Ñ–∏–∫—Å–Ω–∞-–ø—Ä–µ—Ç—Ä–∞–≥–∞">–ü–æ—Å—Ç—Ñ–∏–∫—Å–Ω–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞</a></li>
      </ul>
    </li>
    <li><a href="#–∏–Ω—Ñ–∏–∫—Å–Ω–∞-–ø—Ä–µ—Ç—Ä–∞–≥–∞">–ò–Ω—Ñ–∏–∫—Å–Ω–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞</a>
      <ul>
        <li><a href="#gist-–∏–Ω–¥–µ–∫—Å">GiST –∏–Ω–¥–µ–∫—Å</a></li>
        <li><a href="#–Ω–µ–¥–æ—Å—Ç–∞—Ü–∏-1">–ù–µ–¥–æ—Å—Ç–∞—Ü–∏</a></li>
      </ul>
    </li>
    <li><a href="#–∑–∞–∫—ô—É—á–∞–∫">–ó–∞–∫—ô—É—á–∞–∫</a></li>
    <li><a href="#–¥–æ–¥–∞—Ç–Ω–∞-–ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–î–æ–¥–∞—Ç–Ω–∞ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</a></li>
  </ul>
</nav>
  

  <h2 id="—É–≤–æ–¥">–£–≤–æ–¥</h2>
<p>–ü—Ä–µ—Ç–ø–æ—Å—Ç–∞–≤–∏–º–æ –¥–∞ –∏–º–∞–º–æ —Ç–∞–±–µ–ª—É —Å–∞ —É–ø–∏—Å–∏–º–∞ –∫–æ—ò—É –∂–µ–ª–∏–º–æ –¥–∞ –ø—Ä–µ—Ç—Ä–∞–∂—É—ò–µ–º–æ –ø–æ –Ω–µ–∫–æ–º —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–æ–º –∞—Ç—Ä–∏–±—É—Ç—É, –∫–∞–æ —à—Ç–æ —ò–µ –∏–º–µ –∏–ª–∏ –Ω–∞—Å–ª–æ–≤. –¢–∞–∫–æ—í–µ –∂–µ–ª–∏–º–æ –¥–∞ —Å–æ—Ä—Ç–∏—Ä–∞–º–æ —Ç–µ —É–ø–∏—Å–µ –Ω–∞ –Ω–∞—á–∏–Ω –∫–æ—ò–∏ –Ω–∏—ò–µ –Ω—É–∂–Ω–æ –ø–æ–≤–µ–∑–∞–Ω –Ω–∏ —Å–∞ –∏–º–µ–Ω–æ–º –Ω–∏ –Ω–∞–∑–∏–≤–æ–º - –Ω–∞ –ø—Ä–∏–º—ò–µ—Ä, –∂–µ–ª–∏–º–æ –¥–∞ –ø—Ä–≤–æ –ø—Ä–∏–∫–∞–∂–µ–º–æ –Ω–∞—ò–Ω–æ–≤–∏—ò–µ —É–ø–∏—Å–µ, –∏–ª–∏ –æ–Ω–µ –Ω–∞—ò–ø–æ–ø—É–ª–∞—Ä–Ω–∏—ò–µ. –ù–∞–∫–æ–Ω –Ω–µ–∫–æ–≥ –≤—Ä–µ–º–µ–Ω–∞, –±—Ä–æ—ò —É–ø–∏—Å–∞ —É —Ç–∞–±–µ–ª–∏ —Å–µ –ø–æ–≤–µ—õ–∞–æ, –ø—Ä–µ—Ç—Ä–∞–≥–∞ –ø–æ—Å—Ç–∞—ò–µ —Å–≤–µ —Å–ø–æ—Ä–∏—ò–∞, –∏ –º–æ—Ä–∞–º–æ –Ω–µ–∫–∞–∫–æ –¥–∞ —ò–µ —É–±—Ä–∑–∞–º–æ. –ö–∞–∫–≤–µ —Å—É –Ω–∞–º –æ–ø—Ü–∏—ò–µ –Ω–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—ö—É?</p>
<p>–£ –Ω–∞—Ä–µ–¥–Ω–∏–º —Ä–µ–¥–æ–≤–∏–º–∞ –≤–∏–¥—ò–µ—õ–µ–º–æ –Ω–µ–∫–µ –æ–¥ —Ç–µ—Ö–Ω–∏–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—ò–µ SQL –ø–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–∏, —Å–∞ –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –∏–∑–±—ò–µ–≥–∞–≤–∞—ö—É –æ–ø–µ—Ä–∞—Ü–∏—ò–µ —Å–æ—Ä—Ç–∏—Ä–∞—ö–∞ –∫–∞–æ –ø–æ—Ç–µ–Ω—Ü–∏—ò–∞–ª–Ω–æ <a href="https://use-the-index-luke.com/sql/sorting-grouping">—Å–∫—É–ø–µ –æ–ø–µ—Ä–∞—Ü–∏—ò–µ</a>.</p>
<p>–ó–∞ –ø—Ä–∏–º—ò–µ—Ä —õ–µ–º–æ –∫–æ—Ä–∏—Å—Ç–∏—Ç–∏ —Ç–∞–±–µ–ª—É –∫–æ—ò–∞ —Å–∞–¥—Ä–∂–∏ –ø–æ–¥–∞—Ç–∫–µ –æ —Ä–∞–∑–ª–∏—á–∏—Ç–∏–º –º—É–∑–∏—á–∫–∏–º –∏–∑–≤–æ—í–∞—á–∏–º–∞:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-SQL" data-lang="SQL"><span class="line"><span class="cl"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">music_artist</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">integer</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">cover_photo</span><span class="w"> </span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">short_bio</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">active</span><span class="w"> </span><span class="nb">boolean</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">rating</span><span class="w"> </span><span class="nb">bigint</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span></span></span></code></pre></div><p>–ò–∞–∫–æ —Å–µ –Ω–µ–∫–∏ –æ–¥ –∫–æ–Ω—Ü–µ–ø–∞—Ç–∞ –º–æ–≥—É –∏—Å–∫–æ—Ä–∏—Å—Ç–∏—Ç–∏ —É —Ä–∞–∑–ª–∏—á–∏—Ç–∏–º —Å–∏—Å—Ç–µ–º–∏–º–∞ –±–∞–∑–∞ –ø–æ–¥–∞—Ç–∞–∫–∞, –æ–≤–∞—ò —á–ª–∞–Ω–∞–∫ —Å–µ –ø—Ä–∏–º–∞—Ä–Ω–æ –±–∞–≤–∏ —Å–∞ PostgreSQL –∏ —ö–µ–≥–æ–≤–∏–º –º–æ–≥—É—õ–Ω–æ—Å—Ç–∏–º–∞.</p>
<h2 id="–ø—Ä–µ—Ñ–∏–∫—Å–Ω–∞–ø–æ—Å—Ç—Ñ–∏–∫—Å–Ω–∞-–ø—Ä–µ—Ç—Ä–∞–≥–∞">–ü—Ä–µ—Ñ–∏–∫—Å–Ω–∞/–ø–æ—Å—Ç—Ñ–∏–∫—Å–Ω–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞</h2>
<p>–ò–∞–∫–æ –ø—Ä–µ—Ç—Ä–∞–≥–∞ –∑–∞ —Ç–µ–∫—Å—Ç –∫–æ—ò–∏ –ø–æ—á–∏—ö–µ (–∏–ª–∏ –∑–∞–≤—Ä—à–∞–≤–∞) –Ω–∞ –æ–¥—Ä–µ—í–µ–Ω–∏ –Ω–∞—á–∏–Ω –Ω–∏—ò–µ —Ç–∞–∫–æ —á–µ—Å—Ç–∞, —Ç–µ—Ö–Ω–∏–∫—É –≤—Ä–∏—ò–µ–¥–∏ –æ–ø–∏—Å–∞—Ç–∏ –∏–∑ —Ä–∞–∑–ª–æ–≥–∞ —à—Ç–æ —Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—ò–∞ –º–æ–∂–µ –ø–æ—Å—Ç–∏—õ–∏ —Å—Ç–∞–Ω–¥–∞—Ä–¥–Ω–∏–º b-tree –∏–Ω–¥–µ–∫—Å–æ–º.</p>
<p>–ü—Ä–µ—Ñ–∏–∫—Å –∏ –ø–æ—Å—Ç—Ñ–∏–∫—Å –ø—Ä–µ—Ç—Ä–∞–≥–∞ –∫–æ—Ä–∏—Å—Ç–µ <code>LIKE</code> –æ–ø–µ—Ä–∞—Ç–æ—Ä, —Å–∞ –∑–Ω–∞–∫–æ–º <code>%</code> –Ω–∞ –∫—Ä–∞—ò—É (–ø—Ä–µ—Ñ–∏–∫—Å), –∏–ª–∏ –Ω–∞ –ø–æ—á–µ—Ç–∫—É (–ø–æ—Å—Ç—Ñ–∏–∫—Å) —Ç–µ–∫—Å—Ç–∞ –∑–∞ –∫–æ—ò–∏ –ø—Ä–µ—Ç—Ä–∞–∂—É—ò–µ–º–æ —É–ø–∏—Å–µ. –ö–∞–∫–æ –ø—Ä–µ—Ç—Ä–∞–≥–∞ –Ω–µ –±–∏ –±–∏–ª–∞ –æ—Å—ò–µ—Ç—ô–∏–≤–∞ –Ω–∞ –º–∞–ª–∞ –∏ –≤–µ–ª–∏–∫–∞ —Å–ª–æ–≤–∞, –º–æ–∂–µ–º–æ –¥–∞ –∫–æ—Ä–∏—Å—Ç–∏–º–æ <code>ILIKE</code> –æ–ø–µ—Ä–∞—Ç–æ—Ä, –∏–ª–∏ –¥–∞ —Å–µ –∏ —É–ª–∞–∑–Ω–∏ –∏ —É–ø–∏—Å–∞–Ω–∏ —Ç–µ–∫—Å—Ç –∫–æ–Ω–≤–µ—Ä—Ç—É—ò—É —É —Å–≤–∞ –º–∞–ª–∞ –∏–ª–∏ —Å–≤–∞ –≤–µ–ª–∏–∫–∞ —Å–ª–æ–≤–∞.</p>
<h3 id="–ø—Ä–µ—Ñ–∏–∫—Å–Ω–∞-–ø—Ä–µ—Ç—Ä–∞–≥–∞">–ü—Ä–µ—Ñ–∏–∫—Å–Ω–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞</h3>
<p>–£–ø–∏—Ç –∑–∞ –ø—Ä–µ—Ñ–∏–∫—Å–Ω—É –ø—Ä–µ—Ç—Ä–∞–≥—É –Ω–∞–ø–∏—Å–∞–Ω –∫–∞–æ –ø—Ä–∏–ø—Ä–µ–º—ô–µ–Ω–∏ –∏—Å–∫–∞–∑ –º–æ–∂–µ –¥–∞ –∏–∑–≥–ª–µ–¥–∞ –æ–≤–∞–∫–æ:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-SQL" data-lang="SQL"><span class="line"><span class="cl"><span class="k">prepare</span><span class="w"> </span><span class="n">mas</span><span class="p">(</span><span class="nb">text</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">music_artist</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">ilike</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">rating</span><span class="w"> </span><span class="k">desc</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">limit</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span></span></span></code></pre></div><p>–ò–∑–≤—Ä—à–∞–≤–∞—ö–µ–º –Ω–∞—Ä–µ–¥–±–µ <code>explain</code> –Ω–∞ –æ–≤–∞—ò —É–ø–∏—Ç –ø–æ–∫–∞–∑—É—ò–µ –¥–∞ —ò–µ –ø–æ—Ç—Ä–µ–±–Ω–æ —Å–µ–∫–≤–µ–Ω—Ü–∏—ò–∞–ª–Ω–æ –æ—á–∏—Ç–∞—Ç–∏ —Ü–∏—ò–µ–ª—É —Ç–∞–±–µ–ª—É, —Å–≤–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–µ —Å–æ—Ä—Ç–∏—Ä–∞—Ç–∏ —É —Ä–∞–¥–Ω–æ—ò –º–µ–º–æ—Ä–∏—ò–∏, –∞ –∑–∞—Ç–∏–º –æ–¥–∞–±—Ä–∞—Ç–∏ –ø—Ä–≤–∏—Ö 5 —Ä–µ–∑—É–ª—Ç–∞—Ç–∞:</p>





<pre tabindex="0"><code>=&gt; explain execute mas(&#39;the&#39;);
                                           QUERY PLAN
------------------------------------------------------------------------------------------------
 Limit  (cost=29890.60..29891.17 rows=5 width=50)
   -&gt;  Gather Merge  (cost=29890.60..34297.28 rows=38319 width=50)
         Workers Planned: 1
         -&gt;  Sort  (cost=28890.59..28986.39 rows=38319 width=50)
               Sort Key: rating DESC
               -&gt;  Parallel Seq Scan on music_artist  (cost=0.00..28254.12 rows=38319 width=50)
                     Filter: (active AND ((name)::text ~~* &#39;the%&#39;::text))</code></pre><p>–ö–∞–∫–æ b-tree –∏–Ω–¥–µ–∫—Å –ø–æ–¥—Ä–∂–∞–≤–∞ –ø—Ä–µ—Ñ–∏–∫—Å–Ω—É –ø—Ä–µ—Ç—Ä–∞–≥—É —Ç–µ–∫—Å—Ç–∞ (–æ—Å—ò–µ—Ç—ô–∏–≤–æ –Ω–∞ –º–∞–ª–∞/–≤–µ–ª–∏–∫–∞ —Å–ª–æ–≤–∞), –º–æ–∂–µ–º–æ –∫—Ä–µ–∏—Ä–∞—Ç–∏ –∏–Ω–¥–µ–∫—Å –∫–æ—ò–∏ —õ–µ —Å–∞–¥—Ä–∂–∞—Ç–∏ –∫–æ–ª–æ–Ω–µ <strong>name</strong> –∏ <strong>rating</strong>, —Å–∞ —Ç–µ–∫—Å—Ç–æ–º –∏–∑ –∫–æ–ª–æ–Ω–µ <strong>name</strong> –∫–æ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–∏–º —É —Å–≤–∞ –º–∞–ª–∞ —Å–ª–æ–≤–∞:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">pref_search_idx</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">music_artist</span><span class="w"> </span><span class="p">(</span><span class="n">rating</span><span class="w"> </span><span class="k">desc</span><span class="p">,</span><span class="w"> </span><span class="k">lower</span><span class="p">(</span><span class="n">name</span><span class="p">))</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span></span></span></code></pre></div><p>–û–≤–∞—ò –∏–Ω–¥–µ–∫—Å —ò–µ –ø–∞—Ä—Ü–∏—ò–∞–ª–Ω–∏, –∑–∞—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—ò–∞–º–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—ò–µ, –∫–æ—ò–∏ —á—É–≤–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Å–∞–Ω–µ –ø–æ–¥–∞—Ç–∫–µ –∑–∞ —Å–≤–µ —É–ø–∏—Å–µ –∫–æ—ò–∏ –∏–º–∞—ò—É –∫–æ–ª–æ–Ω—É <strong>active</strong> –ø–æ—Å—Ç–∞–≤—ô–µ–Ω—É –Ω–∞ <code>true</code>. –ö–∞–∫–æ –Ω–∞—Å –∑–∞–Ω–∏–º–∞—ò—É —Å–∞–º–æ –Ω–∞—ò–±–æ—ô–µ –æ—Ü—ò–µ—ö–µ–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏, –∏—Å–∫–æ—Ä–∏—Å—Ç–∏—õ–µ–º–æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞ –æ–ø–∞–¥–∞—ò—É—õ–∏ —Ä–µ–¥–æ—Å–ª–∏—ò–µ–¥ <code>desc</code> –Ω–∞ –∫–æ–ª–æ–Ω–∏ <strong>rating</strong>, –∏ —Ç–∞–∫–æ—í–µ —õ–µ–º–æ —ò–µ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –Ω–∞ –ø—Ä–≤–æ –º—ò–µ—Å—Ç–æ –ø—Ä–∏–ª–∏–∫–æ–º –¥–µ—Ñ–∏–Ω–∏—Ü–∏—ò–µ –∏–Ω–¥–µ–∫—Å–∞, —ò–µ—Ä —Ä–µ–¥–æ—Å–ª–∏—ò–µ–¥ –º–æ—Ä–∞ –¥–∞ —Å–µ –ø–æ–∫–ª–∞–ø–∞ —Å–∞ —Ä–µ–¥–æ—Å–ª–∏—ò–µ–¥–æ–º —É <code>ORDER BY</code> –∫–ª–∞—É–∑—É–ª–∏.</p>
<p>–ö–∞–∫–æ –±–∏ —Å–µ –∞–∂—É—Ä–∏—Ä–∞–ª–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É —Å–∏—Å—Ç–µ–º—É –Ω–∞–∫–æ–Ω –∫—Ä–µ–∏—Ä–∞—ö–∞ –∏–Ω–¥–µ–∫—Å–∞, –∏—Å–∫–æ—Ä–∏—Å—Ç–∏—õ–µ–º–æ –∫–æ–º–∞–Ω–¥—É<code>analyze music_artist;</code>.</p>
<p>–°–∞–¥–∞ —É–ø–∏—Ç –º–æ–∂–µ –¥–∞ —Å–µ –ø—Ä–µ–ø–∏—à–µ –¥–∞ –∫–æ—Ä–∏—Å—Ç–∏ –Ω–æ–≤–∏ –∏–Ω–¥–µ–∫—Å —Ç–∞–∫–æ —à—Ç–æ —õ–µ–º–æ –¥–∞ –∏—Å–∫–æ—Ä–∏—Å—Ç–∏–º–æ <code>LIKE</code> –æ–ø–µ—Ä–∞—Ç–æ—Ä, –∞ –∫–æ–ª–æ–Ω—É –∏ —É–ª–∞–∑–Ω–∏ —Ç–µ–∫—Å—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—à–µ–º–æ —É —Å–≤–∞ –º–∞–ª–∞ —Å–ª–æ–≤–∞:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-SQL" data-lang="SQL"><span class="line"><span class="cl"><span class="k">prepare</span><span class="w"> </span><span class="n">mas2</span><span class="p">(</span><span class="nb">text</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">music_artist</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="k">lower</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="k">lower</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">rating</span><span class="w"> </span><span class="k">desc</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">limit</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span></span></span></code></pre></div><p>–ü–ª–∞–Ω –∏–∑–≤—Ä—à–∞–≤–∞—ö–∞ –Ω–æ–≤–æ–≥ —É–ø–∏—Ç–∞ —Å–∞–¥–∞ —Å–∞–¥—Ä–∂–∏ —Å–∞–º–æ —Å–∫–µ–Ω–∏—Ä–∞—ö–µ –∏–Ω–¥–µ–∫—Å–∞ (index scan) –∫–æ—ò–∏ —Å–µ –∑–∞—É—Å—Ç–∞–≤—ô–∞ —á–∏–º —Å–µ –ø—Ä–æ–Ω–∞—í–µ –ø—Ä–≤–∏—Ö 5 —Ä–µ–∑—É–ª—Ç–∞—Ç–∞:</p>





<pre tabindex="0"><code>=&gt; explain execute mas2(&#39;the&#39;);
                                            QUERY PLAN
--------------------------------------------------------------------------------------------------
 Limit  (cost=0.43..36.77 rows=5 width=50)
   -&gt;  Index Scan using pref_search_idx on music_artist  (cost=0.43..58586.92 rows=8061 width=50)
         Filter: (lower((name)::text) ~~ &#39;the%&#39;::text)</code></pre><p>–í—Ä–∏—ò–µ–º–µ –æ–¥–∑–∏–≤–∞ —ò–µ —Å–∞–¥–∞ –ø–æ–±–æ—ô—à–∞–Ω–æ —Å–∞ –≤–∏—à–µ —Å—Ç–æ—Ç–∏–Ω–∞ –º–∏–ª–∏—Å–µ–∫—É–Ω–¥–∏ –Ω–∞ —Å–≤–µ–≥–∞ –Ω–µ–∫–æ–ª–∏–∫–æ –º–∏–ª–∏—Å–µ–∫—É–Ω–¥–∏ (—É —Ç–µ—Å—Ç–Ω–æ–º –æ–∫—Ä—É–∂–µ—ö—É —Å–∞ –æ–∫–æ 1.6 –º–∏–ª–∏–æ–Ω–∞ —É–ø–∏—Å–∞ —É —Ç–∞–±–µ–ª–∏)!</p>
<p>–ö–∞–æ —à—Ç–æ –≤–∏–¥–∏–º–æ, —É –ø–ª–∞–Ω—É –∏–∑–≤—Ä—à–∞–≤–∞—ö–∞ –Ω–µ–º–∞ <code>Sort</code> –æ–ø–µ—Ä–∞—Ü–∏—ò–µ, —à—Ç–æ –∑–Ω–∞—á–∏ –¥–∞ —Å—É —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –≤–µ—õ —Å–æ—Ä—Ç–∏—Ä–∞–Ω–∏, –∏ –Ω–∏—ò–µ –ø–æ—Ç—Ä–µ–±–Ω–æ –¥–æ–¥–∞—Ç–Ω–æ —Å–æ—Ä—Ç–∏—Ä–∞—ö–µ.</p>
<h3 id="–Ω–µ–¥–æ—Å—Ç–∞—Ü–∏">–ù–µ–¥–æ—Å—Ç–∞—Ü–∏</h3>
<p>–î–æ–∫ —õ–µ –∏–∑–≤–ª–∞—á–µ—ö–µ –ø—Ä–≤–∏—Ö –Ω–µ–∫–æ–ª–∏–∫–æ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞ –±–∏—Ç–∏ –∏–∑—É–∑–µ—Ç–Ω–æ –±—Ä–∑–æ, –ø–∞–¥ –ø–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–∏ —õ–µ —Å–µ –ø—Ä–∏–º—ò–µ—Ç–∏—Ç–∏ –∫–∞–¥–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞ –±—É–¥–µ –º–æ—Ä–∞–ª–∞ –¥–∞ –∑–∞—í–µ –¥—É–±—ô–µ –∫–∞–∫–æ –±–∏ –Ω–∞—à–ª–∞ –ª–æ—à–∏—ò–µ –æ—Ü–∏—ò–µ—ö–µ–Ω–µ —É–ø–∏—Å–µ. –£–∫–æ–ª–∏–∫–æ —É —Ç–æ–º —Å–ª—É—á–∞—ò—É –ø–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–µ –±—É–¥—É –∏–∑—É–∑–µ—Ç–Ω–æ –ª–æ—à–µ, –º–æ–≥—É—õ–µ –∏—Ö —ò–µ –¥–æ–¥–∞—Ç–Ω–æ –ø–æ–±–æ—ô—à–∞—Ç–∏ –ø–æ–º–æ—õ—É –ø–æ–∫—Ä–∏–≤–∞—ò—É—õ–µ–≥ –∏–Ω–¥–µ–∫—Å–∞ (—É–º—ò–µ—Å—Ç–æ –ø—Ä–µ—Ç—Ö–æ–¥–Ω–æ–≥), –æ–¥–Ω–æ—Å–Ω–æ –∏–Ω–¥–µ–∫—Å–∞ –∫–æ—ò–∏ —Å–∞–¥—Ä–∂–∏ —Å–≤–µ –∫–æ–ª–æ–Ω–µ –∏–∑ —É–ø–∏—Ç–∞:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- covering index
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">pref_search_idx</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">music_artist</span><span class="w"> </span><span class="p">(</span><span class="n">rating</span><span class="w"> </span><span class="k">desc</span><span class="p">,</span><span class="w"> </span><span class="k">lower</span><span class="p">(</span><span class="n">name</span><span class="p">))</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">include</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">cover_photo</span><span class="p">,</span><span class="w"> </span><span class="n">short_bio</span><span class="p">)</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- new query
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">prepare</span><span class="w"> </span><span class="n">mas4</span><span class="p">(</span><span class="nb">text</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">cover_photo</span><span class="p">,</span><span class="w"> </span><span class="n">short_bio</span><span class="p">,</span><span class="w"> </span><span class="n">rating</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">music_artist</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="k">lower</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="k">lower</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">rating</span><span class="w"> </span><span class="k">desc</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">limit</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span></span></span></code></pre></div><p>–ö—Ä–µ–∏—Ä–∞—ö–µ –ø–æ–∫—Ä–∏–≤–∞—ò—É—õ–µ–≥ –∏–Ω–¥–µ–∫—Å–∞ —É —Å—É—à—Ç–∏–Ω–∏ –∑–Ω–∞—á–∏ –¥—É–ø–ª–∏—Ä–∞—ö–µ –ø–æ–¥–∞—Ç–∞–∫–∞ –∏–∑ –º–Ω–æ–≥–æ –∫–æ–ª–æ–Ω–∞ (–∏–ª–∏ —á–∞–∫ —Ü–∏—ò–µ–ª–µ —Ç–∞–±–µ–ª–µ), –∏ –ø–æ—Ç–µ–Ω—Ü–∏—ò–∞–ª–Ω–æ —ò–µ —Å–∫—É–ø–æ —Ä—ò–µ—à–µ—ö–µ —É —Å–º–∏—Å–ª—É –ø–æ—Ç—Ä–µ–±–Ω–æ–≥ –∫–∞–ø–∞—Ü–∏—Ç–µ—Ç–∞ –¥–∏—Å–∫–æ–≤–∞. –ê–ª–∏ –ø—Ä–µ–¥–Ω–æ—Å—Ç –ø–æ–∫—Ä–∏–≤–∞—ò—É—õ–µ–≥ –∏–Ω–¥–µ–∫—Å–∞ —ò–µ —à—Ç–æ —Å–≤–µ —É–∫—ô—É—á–µ–Ω–µ –ø–æ–¥–∞—Ç–∫–µ –¥—Ä–∂–∏ —Ñ–∏–∑–∏—á–∫–∏ –±–ª–∏–∑—É —É –ø—Ä–µ–¥–µ—Ñ–∏–Ω–∏—Å–∞–Ω–æ–º —Ä–µ–¥–æ—Å–ª–∏—ò–µ–¥—É, —Ç–∞–∫–æ –¥–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞ –¥—É–±—ô–µ —É –ø–æ–¥–∞—Ç–∫–µ –ø–æ—Å—Ç–∞—ò–µ –∑–Ω–∞—á–∞—ò–Ω–æ –±—Ä–∂–∞, —ò–µ—Ä –Ω–µ–º–∞ –ø–æ—Ç—Ä–µ–±–µ –∑–∞ –Ω–∞—Å—É–º–∏—á–Ω–∏–º –ø—Ä–∏—Å—Ç—É–ø–∞—ö–µ–º –ø–æ–¥–∞—Ü–∏–º–∞ –∏–∑ —Ç–∞–±–µ–ª–µ –Ω–∞ –¥–∏—Å–∫—É.</p>
<h3 id="–ø–æ—Å—Ç—Ñ–∏–∫—Å–Ω–∞-–ø—Ä–µ—Ç—Ä–∞–≥–∞">–ü–æ—Å—Ç—Ñ–∏–∫—Å–Ω–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞</h3>
<p>–ü–æ—Å—Ç—Ñ–∏–∫—Å–Ω–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞ —Å–µ —Å–∞—Å—Ç–æ—ò–∏ –æ–¥ —Ç–æ–≥–∞ —Ç–∞–∫–æ —à—Ç–æ —Å–µ —ò–µ–¥–Ω–æ—Å—Ç–∞–≤–Ω–æ –æ–±—Ä–Ω—É —É–ª–∞–∑–Ω–∏ —Ç–µ–∫—Å—Ç –∏ —Ç–µ–∫—Å—Ç –∏–∑ –∫–æ–ª–æ–Ω–µ, –∏ –∫—Ä–µ–∏—Ä–∞ –∏–Ω–¥–µ–∫—Å —Å–∞ –∏—Å—Ç–∏–º —Ñ—É–Ω–∫—Ü–∏—ò–∞–º–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—ò–µ:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- index
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">pref_search_rev_idx</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">music_artist</span><span class="w"> </span><span class="p">(</span><span class="n">rating</span><span class="w"> </span><span class="k">desc</span><span class="p">,</span><span class="w"> </span><span class="n">reverse</span><span class="p">(</span><span class="k">lower</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- query
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">prepare</span><span class="w"> </span><span class="n">mas3</span><span class="p">(</span><span class="nb">text</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">music_artist</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">reverse</span><span class="p">(</span><span class="k">lower</span><span class="p">(</span><span class="n">name</span><span class="p">))</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="n">reverse</span><span class="p">(</span><span class="k">lower</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">rating</span><span class="w"> </span><span class="k">desc</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">limit</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span></span></span></code></pre></div><p>–ü–ª–∞–Ω –∏–∑–≤—Ä—à–∞–≤–∞—ö–∞, –∫–∞–æ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ü–∏, —Å—É –∏—Å—Ç–∏ –∫–∞–æ –∏ –∑–∞ –ø—Ä–µ—Ñ–∏–∫—Å–Ω—É –ø—Ä–µ—Ç—Ä–∞–≥—É.</p>
<h2 id="–∏–Ω—Ñ–∏–∫—Å–Ω–∞-–ø—Ä–µ—Ç—Ä–∞–≥–∞">–ò–Ω—Ñ–∏–∫—Å–Ω–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞</h2>
<p>–û–≤–æ —ò–µ –∑–Ω–∞—Ç–Ω–æ —á–µ—à—õ–∏ –Ω–∞—á–∏–Ω –ø—Ä–µ—Ç—Ä–∞–≥–µ, –∫–∞–¥–∞ —É–ª–∞–∑–Ω–∏ —Ç–µ–∫—Å—Ç –º–æ–∂–µ –¥–∞ –±—É–¥–µ –±–∏–ª–æ –≥–¥—ò–µ —É —É–ø–∏—Å–∞–Ω–æ–º —Ç–µ–∫—Å—Ç—É, –æ–¥–Ω–æ—Å–Ω–æ –∏–Ω—Ñ–∏–∫—Å–Ω–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞. –û–≤–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞ —Å–µ –≤—Ä—à–∏ —Ç–∞–∫–æ —à—Ç–æ —Å–µ —É–ª–∞–∑–Ω–∏ —Ç–µ–∫—Å –æ–∫—Ä—É–∂–∏ —Å–∞ <code>%</code> –∑–Ω–∞–∫–æ–≤–∏–º–∞, –Ω–ø—Ä. <code>ILIKE %input text%</code>. –ö–∞–∫–æ —É–±—Ä–∑–∞—Ç–∏ —Ç–∞–∫–≤—É –ø—Ä–µ—Ç—Ä–∞–≥—É?</p>
<p>–ù–∞—ò—á–µ—à—õ–∏ –Ω–∞—á–∏–Ω –∑–∞ PostgreSQL —ò–µ –∫–æ—Ä–∏—à—Ç–µ—ö–µ –µ–∫—Å—Ç–µ–Ω–∑–∏—ò–µ <a href="https://www.postgresql.org/docs/12/pgtrgm.html">pg_trgm</a> –∫–æ—ò–∞ –ø–æ–¥—Ä–∂–∞–≤–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–µ —à–∞–±–ª–æ–Ω—Å–∫–µ –ø—Ä–µ—Ç—Ä–∞–≥–µ (<code>LIKE</code>, <code>ILIKE</code>, <code>~*</code>), –∞ –æ–Ω–¥–∞ —Å–µ –∫—Ä–µ–∏—Ä–∞ GIN (–∏–ª–∏ GiST) –∏–Ω–¥–µ–∫—Å –Ω–∞–¥ —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–æ–º –∫–æ–ª–æ–Ω–æ–º:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- add extension
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="n">extension</span><span class="w"> </span><span class="n">pg_trgm</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- create GIN index
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">ma_name_gin_idx</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">music_artist</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">gin</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="n">gin_trgm_ops</span><span class="p">)</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- query
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">prepare</span><span class="w"> </span><span class="n">mas5</span><span class="p">(</span><span class="nb">text</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">music_artist</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">ilike</span><span class="w"> </span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">rating</span><span class="w"> </span><span class="k">desc</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">limit</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span></span></span></code></pre></div><p>–ü–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–µ —Å—É –∑–Ω–∞—á–∞—ò–Ω–æ –ø–æ–≤–µ—õ–∞–Ω–µ –Ω–∞ –æ–≤–∞—ò –Ω–∞—á–∏–Ω. –°–∞ —Ä–∞–∑—É–º–Ω–æ–º –∫–æ–ª–∏—á–∏–Ω–æ–º –ø–æ–¥–∞—Ç–∞–∫–∞, –æ–≤–∞ —Ç–µ—Ö–Ω–∏–∫–∞ —ò–µ –¥–æ–≤–æ—ô–Ω–∞ –¥–∞ —Å–µ –≤—Ä–∏—ò–µ–º–µ –æ–¥–∑–∏–≤–∞ –¥—Ä–∂–∏ –¥–æ–≤–æ—ô–Ω–æ –Ω–∏—Å–∫–∏–º. –ê–ª–∏ —à—Ç–∞ –∞–∫–æ –Ω–∏—ò–µ –¥–æ–≤–æ—ô–Ω–æ –Ω–∏—Å–∫–æ? –®—Ç–∞ —ò–æ—à –º–æ–∂–µ –¥–∞ —Å–µ —É—Ä–∞–¥–∏?</p>
<p>–ê–∫–æ –ø–æ–≥–ª–µ–¥–∞–º–æ –ø–ª–∞–Ω –∏–∑–≤—Ä—à–∞–≤–∞—ö–∞ –æ–¥ —É–ø–∏—Ç–∞ –∏–∑–Ω–∞–¥, –≤–∏–¥–∏–º–æ –¥–∞ —É–∫—ô—É—á—É—ò–µ –Ω–µ–∫–æ–ª–∏–∫–æ –∫–æ—Ä–∞–∫–∞, —É–∫—ô—É—á—É—ò—É—õ–∏ —Å–æ—Ä—Ç–∏—Ä–∞—ö–µ:</p>





<pre tabindex="0"><code>=&gt; explain (costs off) execute mas5(&#39;the&#39;);
                                QUERY PLAN
---------------------------------------------------------------------------
 Limit
   -&gt;  Sort
         Sort Key: rating DESC
         -&gt;  Bitmap Heap Scan on music_artist
               Recheck Cond: (((name)::text ~~* &#39;%the%&#39;::text) AND active)
               -&gt;  Bitmap Index Scan on ma_name_gin_idx
                     Index Cond: ((name)::text ~~* &#39;%the%&#39;::text)</code></pre><p>–†—ò–µ—à–∞–≤–∞—ö–µ –æ–≤–æ–≥ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞—Ö—Ç—ò–µ–≤–∞ –Ω–µ—à—Ç–æ –≤–∏—à–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏.</p>
<h3 id="gist-–∏–Ω–¥–µ–∫—Å">GiST –∏–Ω–¥–µ–∫—Å</h3>
<p>–ï–∫—Å—Ç–µ–Ω–∑–∏—ò–∞ <a href="https://www.postgresql.org/docs/12/pgtrgm.html">pg_trgm</a> —Ç–∞–∫–æ—í–µ –º–æ–∂–µ –¥–∞ –∫–æ—Ä–∏—Å—Ç–∏ –∏ GiST –∏–Ω–¥–µ–∫—Å –∑–∞ —à–∞–±–ª–æ–Ω—Å–∫—É –ø—Ä–µ—Ç—Ä–∞–≥—É —Ç–µ–∫—Å—Ç–∞, –∏–∞–∫–æ —Å–µ GIN –∏–Ω–¥–µ–∫—Å –≥–µ–Ω–µ—Ä–∞–ª–Ω–æ –ø—Ä–µ–ø–æ—Ä—É—á—É—ò–µ –∫–∞–æ –±—Ä–∂–∏ —É –æ–≤–∞–∫–≤–∏–º —Å–ª—É—á–∞—ò–µ–≤–∏–º–∞. GiST —Ç–∞–∫–æ—í–µ –∏–Ω—Ç–µ—Ä–Ω–æ –º–æ–∂–µ –¥–∞ –∏–º–∞ ‚Äù–ª–∞–∂–Ω–æ –ø–æ–∑–∏—Ç–∏–≤–Ω–µ‚Äù —Ä–µ–∑—É–ª—Ç–∞—Ç–µ, —à—Ç–æ —É—Ç–∏—á–µ –Ω–∞ –ø–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–µ.</p>
<p>–®—Ç–∞ —ò–µ –ø–æ—Å–µ–±–Ω–æ —É –≤–µ–∑–∏ GiST –∏–Ω–¥–µ–∫—Å–∞? –û–≤–∞—ò –∏–Ω–¥–µ–∫—Å –º–æ–∂–µ –¥–∞ <a href="https://www.alibabacloud.com/blog/sorting-gist-indexes-by-leveraging-nearest-neighbor-enhancement-in-postgresql-9-1_597005">–∫–æ—Ä–∏—Å—Ç–∏</a> —Ç–∑–≤. –∞–ª–≥–æ—Ä–∏—Ç–∞–º <a href="https://sr.wikipedia.org/wiki/%D0%90%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%B0%D0%BC_%D0%BA_%D0%BD%D0%B0%D1%98%D0%B1%D0%BB%D0%B8%D0%B6%D0%B8%D1%85_%D1%81%D1%83%D1%81%D0%B5%D0%B4%D0%B0">k-–Ω–∞—ò–±–ª–∏–∂–∏—Ö —Å—É—Å—ò–µ–¥–∞</a> –∫–∞–∫–æ –±–∏ —Å–æ—Ä—Ç–∏—Ä–∞–æ —Ä–µ–∑—É–ª—Ç–∞—Ç–µ –ø–æ–º–æ—õ—É –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ —É–¥–∞—ô–µ–Ω–æ—Å—Ç–∏ (<code>&lt;-&gt;</code>), –¥–æ–∫ GIN –∏–Ω–¥–µ–∫—Å –Ω–µ –ø–æ–¥—Ä–∂–∞–≤–∞ —Å–æ—Ä—Ç–∏—Ä–∞—ö–µ —É–æ–ø—à—Ç–µ.</p>
<p>–ö–∞–∫–æ GiST –∏–Ω–¥–µ–∫—Å –Ω–µ –ø–æ–¥—Ä–∂–∞–≤–∞ —Å–∫–∞–ª–∞—Ä–Ω–µ –≤—Ä–∏—ò–µ–¥–Ω–æ—Å—Ç–∏ —Å–∞–º –ø–æ —Å–µ–±–∏, –∞ <strong>rating</strong> –∫–æ–ª–æ–Ω–∞ —ò–µ —Å–∫–∞–ª–∞—Ä–Ω–∞ –≤—Ä–∏—ò–µ–¥–Ω–æ—Å—Ç (–±—Ä–æ—ò —Ç–∏–ø–∞ bigint), –ø—Ä–≤–æ –Ω–∞–º —ò–µ –ø–æ—Ç—Ä–µ–±–Ω–∞ <a href="https://www.postgresql.org/docs/12/btree-gist.html">–µ–∫—Å—Ç–µ–Ω–∑–∏—ò–∞</a> –∫–æ—ò–∞ –æ–º–æ–≥—É—õ–∞–≤–∞ —Ç–∞–∫–≤—É —É–ø–æ—Ç—Ä–µ–±—É:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">create</span><span class="w"> </span><span class="n">extension</span><span class="w"> </span><span class="n">btree_gist</span><span class="p">;</span></span></span></code></pre></div><p>–°–∞–¥–∞ –∫—Ä–µ–∏—Ä–∞—ò–º–æ GiST –∏–Ω–¥–µ–∫—Å –Ω–∞–¥ —Ç–∞–±–µ–ª–æ–º (–Ω–∞–ø–æ–º–µ–Ω–∞: –ø—Ä–µ—Ç—Ö–æ–¥–Ω–æ –∫—Ä–µ–∏—Ä–∞–Ω–∏ –∏–Ω–¥–µ–∫—Å–∏ —Ç—Ä–µ–±–∞ –¥–∞ —Å–µ —É–∫–ª–æ–Ω–µ). –†–µ–¥–æ—Å–ª–∏—ò–µ–¥ –∫–æ–ª–æ–Ω–∞ –Ω–∏—ò–µ –≤–∞–∂–∞–Ω:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">ma_name_gist_idx</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">music_artist</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">gist</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="n">gist_trgm_ops</span><span class="p">,</span><span class="w"> </span><span class="n">rating</span><span class="p">)</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span></span></span></code></pre></div><p>–£–ø–∏—Ç –∫–æ—ò–∏ —õ–µ –¥–∞ –∏—Å–∫–æ—Ä–∏—Å—Ç–∏ –Ω–æ–≤–∏ –∏–Ω–¥–µ–∫—Å –º–æ–∂–µ –¥–∞ —Å–µ –Ω–∞–ø–∏—à–µ –æ–≤–∞–∫–æ:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">prepare</span><span class="w"> </span><span class="n">mas6</span><span class="p">(</span><span class="nb">text</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">music_artist</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">ilike</span><span class="w"> </span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">rating</span><span class="w"> </span><span class="o">&lt;-&gt;</span><span class="w"> </span><span class="mi">50000</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">limit</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span></span></span></code></pre></div><p>–°–∞–¥–∞ –ø–ª–∞–Ω –∏–∑–≤—Ä—à–∞–≤–∞—ö–∞ –∏–∑–≥–ª–µ–¥–∞ –º–Ω–æ–≥–æ —ò–µ–¥–Ω–æ—Å—Ç–∞–≤–Ω–∏—ò–µ:</p>





<pre tabindex="0"><code>=&gt; explain (costs off) execute mas6(&#39;the&#39;);
                               QUERY PLAN
-------------------------------------------------------------------------
 Limit
   -&gt;  Index Scan using ma_name_gist_idx on music_artist
         Index Cond: ((name)::text ~~* ((&#39;%&#39;::text || $1) || &#39;%&#39;::text))
         Order By: (rating &lt;-&gt; &#39;50000&#39;::bigint)</code></pre><p>–í—Ä–∏—ò–µ–¥–Ω–æ—Å—Ç <strong>50000</strong> –æ–≤–¥–µ —ò–µ –≤—Ä–∏—ò–µ–¥–Ω–æ—Å—Ç –≤–µ—õ–∞ –∏–ª–∏ —ò–µ–¥–Ω–∞–∫–∞ –º–∞–∫—Å–∏–º–∞–ª–Ω–æ—ò –≤—Ä–∏—ò–µ–¥–Ω–æ—Å—Ç–∏ –∏–∑ <strong>rating</strong> –∫–æ–ª–æ–Ω–µ, –∫–∞–∫–æ –±–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –±–∏–ª–∏ –¥–æ–±–∏—ò–µ–Ω–∏ —É –æ–ø–∞–¥–∞—ò—É—õ–µ–º —Ä–µ–¥–æ—Å–ª–∏—ò–µ–¥—É. –û–Ω–æ —à—Ç–æ —ò–µ –≤–∞–∂–Ω–æ –Ω–∞–ø–æ–º–µ–Ω—É—Ç–∏ –æ–≤–¥–µ —ò–µ –¥–∞ –∑–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä –¥–∏—Å—Ç–∞–Ω—Ü–µ <strong><em>–ø–æ—Ç—Ä–µ–±–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞</em></strong>. –ê–∫–æ –ø–æ–∫—É—à–∞–º–æ –¥–∞ –≤—Ä–∏—ò–µ–¥–Ω–æ—Å—Ç 50000 –¥–æ–±–∏—ò–µ–º–æ –ø—Ä–µ–∫–æ —É–≥—ö–µ–∂–¥–µ–Ω–æ–≥ —É–ø–∏—Ç–∞, —Å–æ—Ä—Ç–∏—Ä–∞—ö–µ –ø–æ–º–æ—õ—É –∏–Ω–¥–µ–∫—Å–∞ –Ω–µ—õ–µ –±–∏—Ç–∏ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–æ, –∏ –æ–ø–µ—Ä–∞—Ü–∏—ò–∞ <code>Sort</code> —õ–µ –¥–∞ —Å–µ –ø–æ—ò–∞–≤–∏ —É –ø–ª–∞–Ω—É –∏–∑–≤—Ä—à–∞–≤–∞—ö–∞! –¢–æ –∑–Ω–∞—á–∏ –¥–∞ –æ–≤–∞ –≤—Ä–∏—ò–µ–¥–Ω–æ—Å—Ç –º–æ—Ä–∞ –¥–∞ –±—É–¥–µ –ø—Ä–µ—Ç—Ö–æ–¥–Ω–æ –ø—Ä–∏–∫—É–ø—ô–µ–Ω–∞, —É —Å–ª—É—á–∞—ò—É –¥–∞ —Å–µ –ø—Ä–µ—Ç—Ä–∞–≥–∞ –æ–±–∞–≤—ô–∞ –Ω–∞ –æ–≤–∞—ò –Ω–∞—á–∏–Ω.</p>
<blockquote>
<p><strong>–ù–∞–ø–æ–º–µ–Ω–∞</strong>: –æ–ø—Ä–µ–∑–Ω–æ —Å–∞ –∫–æ—Ä–∏—à—Ç–µ—ö–µ–º –∫–æ–ª–æ–Ω–∞ —Ç–∏–ø–∞ <em>bigint</em> —Å–∞ –æ–≤–∏–º –ø—Ä–∏—Å—Ç—É–ø–æ–º, —ò–µ—Ä —á–∏–Ω–∏ —Å–µ –¥–∞ –ø–æ—Å—Ç–æ—ò–∏ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏–ª–∏–∫–æ–º –∫–æ—Ä–∏—à—Ç–µ—ö–∞ –≤–∏—Å–æ–∫–∏—Ö –≤—Ä–∏—ò–µ–¥–Ω–æ—Å—Ç–∏ –∑–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É, –∫–æ—ò–∞ –º–æ–∂–µ –¥–∞ –ø–æ—Ä–µ–º–µ—Ç–∏ —Ä–µ–¥–æ—Å–ª–∏—ò–µ–¥ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞. –ß–∞–∫ —Å–∞–º <a href="https://stackoverflow.com/questions/67116247/strange-sorting-behavior-with-bigint-column-via-gist-index-in-postgresql">–ø–æ—Å—Ç–∞–≤–∏–æ –ø–∏—Ç–∞—ö–µ</a> –Ω–∞ Stack Overflow –Ω–∞ –æ–≤—É —Ç–µ–º—É, –∞–ª–∏ —á–∏–Ω–∏ —Å–µ –¥–∞ –Ω–µ–º–∞ –æ–¥–≥–æ–≤–æ—Ä–∞.</p>
</blockquote>
<h3 id="–Ω–µ–¥–æ—Å—Ç–∞—Ü–∏-1">–ù–µ–¥–æ—Å—Ç–∞—Ü–∏</h3>
<p>–û–≤–∞—ò –Ω–∞—á–∏–Ω –∏–Ω–¥–µ–∫—Å–∏—Ä–∞—ö–∞ –ø–∞—Ç–∏ –æ–¥ –∏—Å—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º–∞ –∫–∞–æ –∏ –ø—Ä–µ—Ñ–∏–∫—Å–Ω–∞/–ø–æ—Å—Ç–∏–∫—Å–Ω–∞ –ø—Ä–µ—Ç—Ä–∞–≥–∞. –®—Ç–æ —ò–µ –º–∞—ö–∞ –æ—Ü—ò–µ–Ω–∞, –¥—É–∂–µ —ò–µ –≤—Ä–∏—ò–µ–º–µ –ø—Ä–µ—Ç—Ä–∞–≥–µ. –ù–∞–∂–∞–ª–æ—Å—Ç, –Ω–µ –º–æ–∂–µ –¥–∞—ô–µ –¥–∞ —Å–µ –ø–æ–±–æ—ô—à–∞ –∫–æ—Ä–∏—à—Ç–µ—ö–µ–º –ø–æ–∫—Ä–∏–≤–∞—ò—É—õ–µ–≥ –∏–Ω–¥–µ–∫—Å–∞. GiST –∏–Ω–¥–µ–∫—Å –ø–æ–¥—Ä–∂–∞–≤–∞ –ø–æ–∫—Ä–∏–≤–∞—ò—É—õ–µ –∏–Ω–¥–µ–∫—Å–∏—Ä–∞—ö–µ, –∞–ª–∏ —Å–∫–µ–Ω–∏—Ä–∞—ö–µ —Å–∞–º–æ–≥ –∏–Ω–¥–µ–∫—Å–∞ –Ω–µ—õ–µ –±–∏—Ç–∏ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–æ –∑–∞ —Å–≤–µ –∫–ª–∞—Å–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞, —à—Ç–æ —Å–µ —á–∏–Ω–∏ –¥–∞ —ò–µ –æ–≤–¥–µ —Å–ª—É—á–∞—ò.</p>
<h2 id="–∑–∞–∫—ô—É—á–∞–∫">–ó–∞–∫—ô—É—á–∞–∫</h2>
<p>–î–∞ –ª–∏ —õ–µ—Ç–µ –∫–æ—Ä–∏—Å—Ç–∏—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä–¥–Ω–∏ –∏–Ω–¥–µ–∫—Å, GIN –∏–ª–∏ GiST –∫–∞–∫–æ –±–∏ —É–±—Ä–∑–∞–ª–∏ –ø—Ä–µ—Ç—Ä–∞–≥—É, –∑–∞–≤–∏—Å–∏ –æ–¥ —Ç–æ–≥–∞ —à—Ç–∞ —ò–µ —Ü–∏—ô, –∫–∞–æ –∏ –æ–¥ –∫–æ–ª–∏—á–∏–Ω–µ –ø—Ä–∏–∫—É–ø—ô–µ–Ω–∏—Ö –ø–æ–¥–∞—Ç–∞–∫–∞. –ù–∞–¥–∞–º —Å–µ –¥–∞ —Å–∞–º –¥–∞–æ —É–≤–∏–¥ —É –ø—Ä–µ–¥–Ω–æ—Å—Ç–∏ –∏ –º–∞–Ω–µ –∑–∞ —Å–≤–∞–∫–∏ –æ–¥ —ö–∏—Ö –∫–∞–¥–∞ —ò–µ —É –ø–∏—Ç–∞—ö—É –ø—Ä–µ—Ç—Ä–∞–≥–∞ —Ç–µ–∫—Å—Ç–∞ –ø–æ —à–∞–±–ª–æ–Ω—É. –ú–µ—í—É—Ç–∏–º, –∞–∫–æ —Ä–µ–ª–∞—Ü–∏–æ–Ω–∞ –±–∞–∑–∞ –ø–æ–¥–∞—Ç–∞–∫–∞ –Ω–∏—ò–µ –¥–æ–≤–æ—ô–Ω–æ –¥–æ–±—Ä–∞ –∑–∞ –ø—Ä–µ—Ç—Ä–∞–≥—É –≤–µ—õ–µ –∫–æ–ª–∏—á–∏–Ω–µ —Ç–µ–∫—Å—Ç–∞, –º–æ–∂–¥–∞ –±–∏ –±–∏–ª–æ –±–æ—ô–µ –∏—Å–∫–æ—Ä–∏—Å—Ç–∏—Ç–∏ —Å–ø–µ—Ü–∏—ò–∞–ª–∏–∑–æ–≤–∞–Ω–∏ –∞–ª–∞—Ç –∑–∞ –ø—Ä–µ—Ç—Ä–∞–≥—É —Ç–µ–∫—Å—Ç–∞, –∫–∞–æ –Ω–ø—Ä. Elastic Search.</p>
<h2 id="–¥–æ–¥–∞—Ç–Ω–∞-–ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–î–æ–¥–∞—Ç–Ω–∞ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</h2>
<ul>
<li>–¢–æ–ø–ª–æ –ø—Ä–µ–ø–æ—Ä—É—á—É—ò–µ–º –≤–µ–± —Å–∞—ò—Ç <a href="https://use-the-index-luke.com/">Use The Index, Luke!</a> –∫–æ—ò–∏ –≤–æ–¥–∏ –ú–∞—Ä–∫—É—Å –í–∏–Ω–∞–Ω–¥, –≥–¥—ò–µ –º–æ–∂–µ –º–Ω–æ–≥–æ –¥–∞ —Å–µ –Ω–∞—É—á–∏ –æ –∏–Ω–¥–µ–∫—Å–∏—Ä–∞—ö—É –ø–æ–¥–∞—Ç–∞–∫–∞ –∏ SQL-—É, –ø—Ä–∏—ò–µ–∫–æ –ø–æ—Ç—Ä–µ–±–Ω–æ–º –∑–Ω–∞—ö—É –∑–∞ —Å–≤–∞–∫–æ–≥ —á–∏—ò–∏ –æ–ø–∏—Å –ø–æ—Å–ª–∞ —É–∫—ô—É—á—É—ò–µ —Ä–∞–¥ —Å–∞ –±–∞–∑–∞–º–∞ –ø–æ–¥–∞—Ç–∞–∫–∞</li>
<li>–ê–∫–æ –Ω–µ–∫–æ–≥ –∏–Ω—Ç–µ—Ä–µ—Å—É—ò–µ –≤–∏—à–µ –ø—Ä–∏–º—ò–µ—Ä–∞ –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—ò–µ –ø–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–∏, –Ω–∞–ø—Ä–∞–≤–∏–æ —Å–∞–º GitHub <a href="https://github.com/drazengolic/music-streamer-db">—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—ò—É–º</a> –≥–¥—ò–µ —Å–∞–º —Å–µ –±–∞–≤–∏–æ —Ç–µ—Ö–Ω–∏–∫–∞–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—ò–µ —Å–ª–∏—á–Ω–∏–º –æ–Ω–∏–º–∞ –æ–ø–∏—Å–∞–Ω–∏–º —É –æ–≤–æ–º —á–ª–∞–Ω–∫—É, –∫–∞–æ –∏ –Ω–µ–∫–∏–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—ò–∞–º–∞ –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—ò–µ –ø–æ–¥–∞—Ç–∞–∫–∞</li>
</ul>

</content>
<p>
  
    <a class="blog-tags" href="https://www.drazengolic.com/sr/tags/postgresql/">#PostgreSQL</a>&nbsp;&nbsp;
  
    <a class="blog-tags" href="https://www.drazengolic.com/sr/tags/%D0%BF%D0%B5%D1%80%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D0%BD%D1%81%D0%B5/">#–ü–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–µ</a>&nbsp;&nbsp;
  
</p>


  </main>
  <footer><small>
  ¬© Drazen Golic (<a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC BY 4.0</a>) | –ö—Ä–µ–∏—Ä–∞–Ω–æ —Å–∞ <a href="https://github.com/clente/hugo-bearcub">Bear Cub</a>
</small></footer>

    
</body>

</html>
